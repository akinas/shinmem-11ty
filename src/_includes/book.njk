{% extends "base.njk" %}

{% block title %}{{ title }} by {{ author }} | ShinMem | שמע מינה{% endblock %}
{% block og_title %}{{ title }} by {{ author }} | ShinMem | שמע מינה{% endblock %}

{% block navigation %}
<div class="book-navigation">
  <a href="{% if page.lang == 'he' %}/{% else %}/en/{% endif %}" class="back-home-link">
    ← {% if page.lang == 'he' %}חזרה לעמוד הבית{% else %}Back to Home{% endif %}
  </a>
</div>
{% endblock %}



{% block main_content %}
<main class="book-content">
  {# Hero section with book cover #}
  <div class="book-hero">
    <div class="book-cover-container">
      <img 
        src="{{ image_src }}" 
        alt="{{ title }} book cover" 
        class="book-cover-image"
        loading="lazy"
      />
    </div>
    <div class="book-info">
      <h1 class="book-title">{{ title }}{% if title_en and title_en != title %} ({{ title_en }}){% endif %}</h1>
      <p class="book-author">{{ author }}{% if year %} ({{ year }}){% endif %}</p>
      {% if edition_year %}
        <p class="book-edition">{{ i18n.edition[page.lang] }} {{ edition_year }}</p>
      {% endif %}
      
      {# Book Actions - moved to hero for better UX #}
      <div class="book-actions-hero">
        {% if status == 'available' and buy_now_url %}
          <a href="{{ buy_now_url }}" target="_blank" rel="noreferrer noopener" class="button home-button">
            {% if page.lang == 'he' %}קנה עכשיו{% else %}Buy Now{% endif %}
          </a>
          {% else %}
        <div class="app-component-container">
          <button type="button" class="button">
            <span>{{ i18n.sold_out[page.lang] }}</span>
          </button>
        </div>
      {% endif %}
        
        
        {% if read_more_url %}
          <a href="{{ read_more_url }}" target="_blank" rel="noreferrer noopener" class="button">
            {{ i18n.read_more[page.lang] }}
          </a>
        {% endif %}
      </div>
    </div>
  </div>
  
  <div class="book-main-content">
    {{ content | safe }}
  </div>
  
  {# Remove the duplicate book actions since they're now in the hero #}
</main>
{% endblock %}